<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>DriveMart â€” Admin Dashboard</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    :root {
      --primary-color: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary-color: #64748b;
      --accent-color: #f59e0b;
      --success-color: #10b981;
      --danger-color: #ef4444;
      --warning-color: #f59e0b;
      --info-color: #06b6d4;
      --dark-bg: #0f172a;
      --light-bg: #f8fafc;
      --white: #ffffff;
      --border-color: #e2e8f0;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 25px 50px rgba(0, 0, 0, 0.1);
      --border-radius: 12px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: var(--text-primary);
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .main-wrapper {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      min-height: calc(100vh - 40px);
      display: flex;
      flex-direction: column;
    }

    /* Header Styles */
    .header {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      padding: 25px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .header-content h1 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .header-content .subtitle {
      opacity: 0.9;
      font-size: 0.9rem;
    }

    .logout-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    /* Layout */
    .main-content {
      display: flex;
      flex: 1;
    }

    /* Sidebar Styles */
    .sidebar {
      width: 280px;
      background: var(--light-bg);
      border-right: 1px solid var(--border-color);
      padding: 20px 0;
      overflow-y: auto;
    }

    .nav-menu {
      list-style: none;
    }

    .nav-item {
      margin: 8px 15px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      color: var(--text-secondary);
      text-decoration: none;
      border-radius: var(--border-radius);
      font-weight: 500;
      transition: var(--transition);
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      font-size: 1rem;
    }

    .nav-link:hover {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      transform: translateX(5px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .nav-link.active {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .nav-link i {
      width: 20px;
      margin-right: 12px;
      text-align: center;
    }

    /* Content Area */
    .content-area {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
      max-height: calc(100vh - 120px);
    }

    .page-section {
      display: none;
      animation: fadeInUp 0.5s ease;
    }

    .page-section.active {
      display: block;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .page-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    /* Cards */
    .card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
      margin-bottom: 25px;
      overflow: hidden;
      transition: var(--transition);
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      padding: 20px 25px;
      border-bottom: 1px solid var(--border-color);
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-body {
      padding: 25px;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      margin-bottom: 15px;
    }

    .stat-value {
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 5px;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
      background: white;
      color: var(--text-primary);
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: var(--border-radius);
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      justify-content: center;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
    }

    .btn-success {
      background: var(--success-color);
      color: white;
    }

    .btn-success:hover {
      background: #059669;
      transform: translateY(-1px);
    }

    .btn-danger {
      background: var(--danger-color);
      color: white;
    }

    .btn-danger:hover {
      background: #dc2626;
      transform: translateY(-1px);
    }

    .btn-warning {
      background: var(--warning-color);
      color: white;
    }

    .btn-sm {
      padding: 8px 16px;
      font-size: 0.85rem;
    }

    .btn-full {
      width: 100%;
    }

    /* Table Styles */
    .table-container {
      background: white;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table thead {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
    }

    .table th {
      padding: 18px 15px;
      text-align: left;
      font-weight: 600;
      border: none;
    }

    .table td {
      padding: 15px;
      border-bottom: 1px solid var(--border-color);
      vertical-align: middle;
    }

    .table tbody tr:hover {
      background: rgba(37, 99, 235, 0.05);
    }

    /* Search Bar */
    .search-container {
      position: relative;
      margin-bottom: 20px;
    }

    .search-container input {
      padding-left: 45px;
    }

    .search-container i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
      z-index: 1;
    }

    /* Upload Area */
    .upload-area {
      border: 2px dashed var(--border-color);
      border-radius: var(--border-radius);
      padding: 40px;
      text-align: center;
      transition: var(--transition);
      cursor: pointer;
      background: rgba(37, 99, 235, 0.02);
    }

    .upload-area:hover,
    .upload-area.dragover {
      border-color: var(--primary-color);
      background: rgba(37, 99, 235, 0.05);
    }

    .upload-area i {
      font-size: 3rem;
      color: var(--primary-color);
      margin-bottom: 15px;
      display: block;
    }

    .upload-text {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .upload-subtext {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Image Preview */
    .image-preview {
      max-width: 100px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid var(--border-color);
      margin: 5px;
    }

    .image-preview-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    /* Badges */
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: capitalize;
    }

    .badge.available {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success-color);
      border: 1px solid var(--success-color);
    }

    .badge.unavailable {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger-color);
      border: 1px solid var(--danger-color);
    }

    .badge.warning {
      background: rgba(245, 158, 11, 0.1);
      color: var(--warning-color);
      border: 1px solid var(--warning-color);
    }

    .badge.info {
      background: rgba(6, 182, 212, 0.1);
      color: var(--info-color);
      border: 1px solid var(--info-color);
    }

    .badge.secondary {
      background: rgba(100, 116, 139, 0.1);
      color: var(--text-secondary);
      border: 1px solid var(--text-secondary);
    }

    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: var(--border-radius);
      color: white;
      font-weight: 600;
      z-index: 1000;
      min-width: 300px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: var(--shadow);
      animation: slideIn 0.3s ease;
    }

    .notification.success {
      background: var(--success-color);
    }

    .notification.error {
      background: var(--danger-color);
    }

    .notification.info {
      background: var(--info-color);
    }

    .notification.primary {
      background: var(--primary-color);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .notification-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: auto;
      padding: 0;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Contact Info */
    .contact-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
    }

    .contact-item {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 20px;
    }

    .contact-item i {
      color: var(--primary-color);
      font-size: 1.2rem;
      width: 20px;
      margin-top: 2px;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .sidebar {
        width: 250px;
      }
      
      .content-area {
        padding: 20px;
      }
      
      .stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      .main-content {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
        padding: 15px 0;
      }
      
      .nav-menu {
        display: flex;
        overflow-x: auto;
        padding: 0 10px;
        gap: 10px;
      }
      
      .nav-item {
        margin: 0;
        flex-shrink: 0;
      }
      
      .nav-link {
        white-space: nowrap;
        padding: 10px 15px;
      }
      
      .header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }
      
      .header-content h1 {
        font-size: 1.5rem;
      }
      
      .content-area {
        padding: 15px;
      }
      
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .quick-actions {
        grid-template-columns: 1fr;
      }
      
      .contact-info {
        grid-template-columns: 1fr;
      }
      
      .table-container {
        overflow-x: auto;
      }
      
      .table {
        min-width: 600px;
      }
    }

    /* Utility Classes */
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align: right; }
    .mb-0 { margin-bottom: 0; }
    .mb-1 { margin-bottom: 10px; }
    .mb-2 { margin-bottom: 20px; }
    .mb-3 { margin-bottom: 30px; }
    .mt-1 { margin-top: 10px; }
    .mt-2 { margin-top: 20px; }
    .mt-3 { margin-top: 30px; }
    .d-flex { display: flex; }
    .align-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .gap-1 { gap: 10px; }
    .gap-2 { gap: 20px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="container">
    <div class="main-wrapper">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1>
            <i class="fas fa-car"></i>
            DriveMart Admin
          </h1>
          <div class="subtitle">Complete Vehicle Management System</div>
        </div>
        <button id="logout" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i>
          Logout
        </button>
      </header>

      <div class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
          <ul class="nav-menu">
            <li class="nav-item">
              <button class="nav-link active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="cars">
                <i class="fas fa-car"></i>
                Manage Cars
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="parts">
                <i class="fas fa-cog"></i>
                Car Parts
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="orders">
                <i class="fas fa-shopping-cart"></i>
                Orders
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="inventory">
                <i class="fas fa-warehouse"></i>
                Inventory
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="about">
                <i class="fas fa-info-circle"></i>
                About
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-section="contact">
                <i class="fas fa-phone"></i>
                Contact
              </button>
            </li>
          </ul>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
          
          <!-- Dashboard Section -->
          <section id="dashboard" class="page-section active">
            <h2 class="page-title">
              <i class="fas fa-tachometer-alt"></i>
              Dashboard Overview
            </h2>
            
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));">
                  <i class="fas fa-car"></i>
                </div>
                <div class="stat-value" id="total-cars">24</div>
                <div class="stat-label">Total Cars</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, var(--success-color), #059669);">
                  <i class="fas fa-cog"></i>
                </div>
                <div class="stat-value" id="total-parts">156</div>
                <div class="stat-label">Car Parts</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, var(--warning-color), #d97706);">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-value" id="total-orders">43</div>
                <div class="stat-label">Pending Orders</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                  <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-value" id="total-revenue">$48,250</div>
                <div class="stat-label">Monthly Revenue</div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <i class="fas fa-bolt"></i>
                Quick Actions
              </div>
              <div class="card-body">
                <div class="quick-actions">
                  <button class="btn btn-primary" onclick="showSection('cars')">
                    <i class="fas fa-plus"></i>
                    Add New Car
                  </button>
                  <button class="btn btn-success" onclick="showSection('parts')">
                    <i class="fas fa-plus"></i>
                    Add Car Part
                  </button>
                  <button class="btn btn-primary" onclick="showSection('orders')">
                    <i class="fas fa-eye"></i>
                    View Orders
                  </button>
                  <button class="btn btn-primary" onclick="showSection('inventory')">
                    <i class="fas fa-warehouse"></i>
                    Check Inventory
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Cars Section -->
          <section id="cars" class="page-section">
        <h2 class="page-title">
            <i class="fas fa-car"></i>
            Manage Cars
        </h2>
        
        <div class="card">
            <div class="card-body">
                <form id="carForm">
                    <!-- Section 1: Basic Car Info -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-info-circle"></i>
                            Basic Information
                        </h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Model</label>
                                <input type="text" class="form-control" name="model" required placeholder="Enter the car model">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Price ($)</label>
                                <input type="number" class="form-control" name="price" min="0" step="0.01" required placeholder="Enter price">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Availability</label>
                                <select class="form-control" name="availability" required>
                                    <option value="">Select Availability</option>
                                    <option value="available">Available</option>
                                    <option value="unavailable">Unavailable</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Section 2: Brand Information -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-building"></i>
                            Brand Information
                        </h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Brand Name</label>
                                <input type="text" class="form-control" name="brandName" required placeholder="e.g., Toyota, Honda">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Country of Origin</label>
                                <input type="text" class="form-control" name="countryOfOrigin" required placeholder="e.g., Japan, Germany">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Established Year</label>
                                <input type="number" class="form-control" name="establishedYear" min="1800" max="2025" required placeholder="e.g., 1937">
                            </div>
                        </div>
                    </div>

                    <!-- Section 3: Color Information -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-palette"></i>
                            Color Information
                        </h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Color Name</label>
                                <select class="form-control" name="colorName" required>
                                    <option value="">-- Select Color --</option>
                                    <option value="RED">Red</option>
                                    <option value="BLUE">Blue</option>
                                    <option value="BLACK">Black</option>
                                    <option value="WHITE">White</option>
                                    <option value="SILVER">Silver</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Color Description</label>
                                <textarea class="form-control" name="colorDescription" rows="2" placeholder="Brief description of the color..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Section 4: Engine Specifications -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-cog"></i>
                            Engine Specifications
                        </h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Fuel Type</label>
                                <select class="form-control" name="fuelType" required>
                                    <option value="">Select Fuel Type</option>
                                    <option value="PETROL">Petrol</option>
                                    <option value="DIESEL">Diesel</option>
                                    <option value="ELECTRIC">Electric</option>
                                    <option value="HYBRID">Hybrid</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Transmission</label>
                                <select class="form-control" name="transmission" required>
                                    <option value="">Select Transmission</option>
                                    <option value="MANUAL">Manual</option>
                                    <option value="AUTOMATIC">Automatic</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Engine Capacity (L)</label>
                                <input type="number" class="form-control" name="engineCapacity" min="0" step="0.1" required placeholder="e.g., 2.0, 3.5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Mileage (km/L)</label>
                                <input type="number" class="form-control" name="mileage" min="0" step="0.1" required placeholder="e.g., 15.5">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Car Images Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-images"></i>
                            Car Images
                        </h3>
                        <div class="form-group">
                            <div class="upload-area" onclick="document.getElementById('carImages').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <div class="upload-text">Click to upload car images</div>
                                <div class="upload-subtext">or drag and drop files here</div>
                                <div class="upload-subtext">Supports: JPG, PNG, GIF (Max: 5MB each)</div>
                            </div>
                            <input type="file" id="carImages" name="images" multiple accept="image/*" class="hidden">
                            <div id="imagePreview" class="image-preview-container"></div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Car
                        </button>
                        <button type="reset" class="btn btn-secondary">
                            <i class="fas fa-undo"></i>
                            Reset Form
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-list"></i>
                Cars Inventory
            </div>
            <div class="card-body">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" class="form-control" id="carSearch" placeholder="Search cars by brand, model, or year...">
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Brand</th>
                                <th>Model</th>
                                <th>Price</th>
                                <th>Engine</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="carsTable">
                            <!-- Cars will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

          <!-- Parts Section -->
          <section id="parts" class="page-section">
            <h2 class="page-title">
              <i class="fas fa-cog"></i>
              Car Parts Management
            </h2>
            
            <div class="card">
              <div class="card-header">
                <i class="fas fa-plus"></i>
                Add New Part
              </div>
              <div class="card-body">
                <form id="partForm">
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">Part Name</label>
                      <input type="text" class="form-control" name="name" required placeholder="e.g., Brake Pads, Air Filter">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Part Number</label>
                      <input type="text" class="form-control" name="partNumber" required placeholder="e.g., BP-001">
                    </div>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">Category</label>
                      <select class="form-control" name="category" required>
                        <option value="">Select Category</option>
                        <option value="engine">Engine</option>
                        <option value="brakes">Brakes</option>
                        <option value="suspension">Suspension</option>
                        <option value="electrical">Electrical</option>
                        <option value="interior">Interior</option>
                        <option value="exterior">Exterior</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Price ($)</label>
                      <input type="number" class="form-control" name="price" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Stock Quantity</label>
                      <input type="number" class="form-control" name="stock" min="0" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Compatible Cars (Brands/Models)</label>
                    <input type="text" class="form-control" name="compatibility" placeholder="e.g., Toyota Camry, Honda Civic">
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" name="description" rows="3" placeholder="Brief description of the part..."></textarea>
                  </div>
                  
                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Add Part
                  </button>
                </form>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <i class="fas fa-list"></i>
                Parts Inventory
              </div>
              <div class="card-body">
                <div class="search-container">
                  <i class="fas fa-search"></i>
                  <input type="text" class="form-control" id="partSearch" placeholder="Search parts by name or part number...">
                </div>
                
                <div class="table-container">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Part Name</th>
                        <th>Part Number</th>
                        <th>Category</th>
                        <th>Price</th>
                        <th>Stock</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="partsTable">
                      <!-- Parts will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <!-- Orders Section -->
          <section id="orders" class="page-section">
            <h2 class="page-title">
              <i class="fas fa-shopping-cart"></i>
              Order Management
            </h2>
            
            <div class="card">
              <div class="card-header">
                <i class="fas fa-shopping-cart"></i>
                Recent Orders
              </div>
              <div class="card-body">
                <div class="table-container">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Item</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="ordersTable">
                      <tr>
                        <td>#ORD-001</td>
                        <td>John Doe</td>
                        <td>Toyota Camry 2022</td>
                        <td>$28,500</td>
                        <td><span class="badge warning">Pending</span></td>
                        <td>2025-08-10</td>
                        <td>
                          <button class="btn btn-sm btn-success">Approve</button>
                          <button class="btn btn-sm btn-danger">Cancel</button>
                        </td>
                      </tr>
                      <tr>
                        <td>#ORD-002</td>
                        <td>Jane Smith</td>
                        <td>Brake Pads - Honda</td>
                        <td>$85</td>
                        <td><span class="badge available">Completed</span></td>
                        <td>2025-08-09</td>
                        <td>
                          <button class="btn btn-sm btn-primary">View</button>
                        </td>
                      </tr>
                      <tr>
                        <td>#ORD-003</td>
                        <td>Mike Johnson</td>
                        <td>Honda Civic 2023</td>
                        <td>$25,200</td>
                        <td><span class="badge info">Processing</span></td>
                        <td>2025-08-08</td>
                        <td>
                          <button class="btn btn-sm btn-success">Approve</button>
                          <button class="btn btn-sm btn-danger">Cancel</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <!-- Inventory Section -->
          <section id="inventory" class="page-section">
            <h2 class="page-title">
              <i class="fas fa-warehouse"></i>
              Inventory Overview
            </h2>
            
            <div class="form-row">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-exclamation-triangle"></i>
                  Low Stock Alerts
                </div>
                <div class="card-body">
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Brake Pads</span>
                    <span class="badge warning">5 left</span>
                  </div>
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Air Filters</span>
                    <span class="badge unavailable">2 left</span>
                  </div>
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Oil Filters</span>
                    <span class="badge warning">8 left</span>
                  </div>
                  <div class="d-flex justify-between align-center">
                    <span>Spark Plugs</span>
                    <span class="badge warning">6 left</span>
                  </div>
                </div>
              </div>
              
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-trophy"></i>
                  Top Selling Items
                </div>
                <div class="card-body">
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Toyota Camry</span>
                    <span class="badge available">12 sold</span>
                  </div>
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Honda Civic</span>
                    <span class="badge available">8 sold</span>
                  </div>
                  <div class="d-flex justify-between align-center mb-1">
                    <span>Brake Pads</span>
                    <span class="badge available">45 sold</span>
                  </div>
                  <div class="d-flex justify-between align-center">
                    <span>Air Filters</span>
                    <span class="badge available">32 sold</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- About Section -->
          <section id="about" class="page-section">
            <h2 class="page-title">
              <i class="fas fa-info-circle"></i>
              About DriveMart
            </h2>
            
            <div class="card">
              <div class="card-header">
                <i class="fas fa-building"></i>
                Our Story
              </div>
              <div class="card-body">
                <p>DriveMart is your premier destination for quality vehicles and automotive parts. With over 20 years of experience in the automotive industry, we pride ourselves on offering exceptional service and competitive prices.</p>
                
                <h3 class="mt-3 mb-2">Our Mission</h3>
                <p>To provide customers with reliable, affordable vehicles and parts while maintaining the highest standards of customer service and satisfaction.</p>
                
                <h3 class="mt-3 mb-2">Our Services</h3>
                <ul style="list-style-position: inside; color: var(--text-secondary);">
                  <li>New and Used Car Sales</li>
                  <li>Automotive Parts and Accessories</li>
                  <li>Vehicle Maintenance and Repair</li>
                  <li>Financing Options</li>
                  <li>Trade-in Services</li>
                  <li>Extended Warranty Programs</li>
                </ul>
                
                <h3 class="mt-3 mb-2">Why Choose DriveMart?</h3>
                <ul style="list-style-position: inside; color: var(--text-secondary);">
                  <li>Expert automotive professionals</li>
                  <li>Competitive pricing</li>
                  <li>Quality assurance guarantee</li>
                  <li>Comprehensive after-sales support</li>
                  <li>Wide selection of vehicles and parts</li>
                </ul>
              </div>
            </div>
          </section>

          <!-- Contact Section -->
          <section id="contact" class="page-section">
            <h2 class="page-title">
              <i class="fas fa-phone"></i>
              Contact Information
            </h2>
            
            <div class="contact-info">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-address-book"></i>
                  Get In Touch
                </div>
                <div class="card-body">
                  <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                      <strong>Address:</strong><br>
                      123 Auto Street<br>
                      Car City, CC 12345<br>
                      United States
                    </div>
                  </div>
                  
                  <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <div>
                      <strong>Phone:</strong><br>
                      (555) 123-4567<br>
                      Toll Free: (800) 123-CARS
                    </div>
                  </div>
                  
                  <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                      <strong>Email:</strong><br>
                      info@drivemart.com<br>
                      support@drivemart.com
                    </div>
                  </div>
                  
                  <div class="contact-item">
                    <i class="fas fa-clock"></i>
                    <div>
                      <strong>Business Hours:</strong><br>
                      Mon-Fri: 9:00 AM - 7:00 PM<br>
                      Saturday: 9:00 AM - 6:00 PM<br>
                      Sunday: 12:00 PM - 5:00 PM
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-paper-plane"></i>
                  Send Message
                </div>
                <div class="card-body">
                  <form id="contactForm">
                    <div class="form-group">
                      <label class="form-label">Full Name</label>
                      <input type="text" class="form-control" name="name" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Email Address</label>
                      <input type="email" class="form-control" name="email" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Phone Number</label>
                      <input type="tel" class="form-control" name="phone">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Subject</label>
                      <input type="text" class="form-control" name="subject" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Message</label>
                      <textarea class="form-control" name="message" rows="4" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">
                      <i class="fas fa-paper-plane"></i>
                      Send Message
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </section>

        </main>
      </div>
    </div>
  </div>
<script>
// DriveMart Admin Dashboard JavaScript

// Global Data Storage (In-Memory)

let parts = [
  {
    id: 1,
    name: 'Brake Pads',
    partNumber: 'BP-001',
    category: 'brakes',
    price: 85.99,
    stock: 5,
    compatibility: 'Toyota Camry, Honda Civic',
    description: 'High-quality ceramic brake pads for better stopping power'
  },
  {
    id: 2,
    name: 'Air Filter',
    partNumber: 'AF-002',
    category: 'engine',
    price: 25.50,
    stock: 2,
    compatibility: 'Honda Civic, Toyota Corolla',
    description: 'OEM replacement air filter for optimal engine performance'
  },
  {
    id: 3,
    name: 'Oil Filter',
    partNumber: 'OF-003',
    category: 'engine',
    price: 15.75,
    stock: 8,
    compatibility: 'Toyota Camry, Honda Accord',
    description: 'Premium oil filter for engine protection'
  },
  {
    id: 4,
    name: 'Spark Plugs',
    partNumber: 'SP-004',
    category: 'engine',
    price: 12.99,
    stock: 6,
    compatibility: 'Honda Civic, Toyota Camry',
    description: 'Iridium spark plugs for improved fuel efficiency'
  }
];

let orders = [
  {
    id: 'ORD-001',
    customer: 'John Doe',
    item: 'Toyota Camry 2022',
    amount: 28500,
    status: 'pending',
    date: '2025-08-10'
  },
  {
    id: 'ORD-002',
    customer: 'Jane Smith',
    item: 'Brake Pads - Honda',
    amount: 85.99,
    status: 'completed',
    date: '2025-08-09'
  },
  {
    id: 'ORD-003',
    customer: 'Mike Johnson',
    item: 'Honda Civic 2023',
    amount: 25200,
    status: 'processing',
    date: '2025-08-08'
  }
];

// Utility Functions
function showNotification(message, type = 'success') {
  // Create notification element
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
    color: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    z-index: 1000;
    font-weight: 500;
    min-width: 250px;
    animation: slideIn 0.3s ease;
  `;
  notification.textContent = message;
  
  document.body.appendChild(notification);
  
  // Remove after 3 seconds
  setTimeout(() => {
    notification.style.animation = 'slideOut 0.3s ease';
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

function generateId() {
  return Date.now() + Math.random().toString(36).substr(2, 9);
}

// Navigation Functions
function showSection(sectionId) {
  // Hide all sections
  document.querySelectorAll('.page-section').forEach(section => {
    section.classList.remove('active');
  });
  
  // Remove active class from all nav links
  document.querySelectorAll('.nav-link').forEach(link => {
    link.classList.remove('active');
  });
  
  // Show selected section
  const targetSection = document.getElementById(sectionId);
  if (targetSection) {
    targetSection.classList.add('active');
  }
  
  // Add active class to corresponding nav link
  const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
  if (activeLink) {
    activeLink.classList.add('active');
  }
  
  // Update dashboard stats when switching to dashboard
  if (sectionId === 'dashboard') {
    updateDashboardStats();
  }
}

// Dashboard Functions
function updateDashboardStats() {
  const totalCars = cars.length;
  const totalParts = parts.reduce((sum, part) => sum + part.stock, 0);
  const pendingOrders = orders.filter(order => order.status === 'pending').length;
  const monthlyRevenue = orders
    .filter(order => order.status === 'completed')
    .reduce((sum, order) => sum + order.amount, 0);
  
  document.getElementById('total-cars').textContent = totalCars;
  document.getElementById('total-parts').textContent = totalParts;
  document.getElementById('total-orders').textContent = pendingOrders;
  document.getElementById('total-revenue').textContent = `$${monthlyRevenue.toLocaleString()}`;
}

// Car Management Functions
/*function renderCarsTable() {
  const tbody = document.getElementById('carsTable');
  tbody.innerHTML = '';
  
  cars.forEach(car => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>
        <div style="width: 50px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
          <i class="fas fa-car" style="color: #9ca3af;"></i>
        </div>
      </td>
      <td>${car.brand}</td>
      <td>${car.model}</td>
      <td>${car.year}</td>
      <td>$${car.price.toLocaleString()}</td>
      <td>
        <span class="badge ${car.availability === 'available' ? 'available' : 'unavailable'}">
          ${car.availability.charAt(0).toUpperCase() + car.availability.slice(1)}
        </span>
      </td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editCar(${car.id})">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-danger" onclick="deleteCar(${car.id})">
          <i class="fas fa-trash"></i>
        </button>
      </td>
    `;
    tbody.appendChild(row);
  });
}*/

class CarManager {
    constructor() {
        this.apiBaseUrl = 'http://localhost:8080/cmc';
        this.apiEndpoints = {
            save: `${this.apiBaseUrl}/saveCar`,
            getAll: `${this.apiBaseUrl}/showAllCars`,
            delete: (id) => `${this.apiBaseUrl}/delete/${id}`,
            update: (id) => `${this.apiBaseUrl}/update/${id}`
        };
        this.initializeEventListeners();
        this.loadCars();
    }

    initializeEventListeners() {
        const carForm = document.getElementById('carForm');
        const carSearch = document.getElementById('carSearch');

        carForm.addEventListener('submit', (e) => this.handleCarSubmit(e));
        carSearch.addEventListener('input', (e) => this.handleSearch(e));
    }

    async handleCarSubmit(e) {
        e.preventDefault();

        const form = e.target;
        
        try {

            
            // Collect form data
            const carData = {
            model: form.model.value,
            price: form.price.value,
            availability: form.availability.value,
            brandInfo: {
                brandName: form.brandName.value,
                countryOfOrigin: form.countryOfOrigin.value,
                establishedYear: form.establishedYear.value
            },
            colors: [
                {
                    colorName: form.colorName.value,
                    colorDescription: form.colorDescription.value
                }
            ],
            engineInfo: {
                fuelType: form.fuelType.value.toUpperCase(), // Ensure it matches enum (PETROL, DIESEL, etc.)
                transmission: form.transmission.value.toUpperCase(), // Ensure it matches enum (MANUAL, AUTOMATIC, etc.)
                capacity: form.engineCapacity.value,
                mileage: form.mileage.value
            }
            // Timestamps might be auto-generated by backend
        };

            // Show loading state
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            submitBtn.disabled = true;

            // Send to backend
            const response = await fetch(this.apiEndpoints.save, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(carData)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            
            // Show success message
            this.showNotification('Car saved successfully!', 'success');
            
            // Reset form and reload cars
            form.reset();
            this.loadCars();

        } catch (error) {
            console.error('Error saving car:', error);
            this.showNotification('Failed to save car. Please try again.', 'error');
        } finally {
            // Reset button state
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-save"></i> Save Car';
            submitBtn.disabled = false;
        }
    }



    async loadCars() {
        try {
            const response = await fetch(this.apiEndpoints.getAll);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const cars = await response.json();
            this.displayCars(cars);
        } catch (error) {
            console.error('Error loading cars:', error);
            this.showNotification('Failed to load cars.', 'error');
        }
    }

    displayCars(cars) {
        const tableBody = document.getElementById('carsTable');
        tableBody.innerHTML = '';

        cars.forEach(car => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <div class="car-placeholder">
                        <i class="fas fa-car"></i>
                    </div>
                </td>
                <td>${car.brandInfo.brandName}</td>
                <td>${car.model}</td>
                <td>$${car.price.toLocaleString()}</td>dd
                <td>
                    <span class="status-badge ${car.availability}">
                        ${car.availability}
                    </span>
                </td>
                <td>
                    <button class="btn btn-sm btn-primary" onclick="carManager.editCar(${car.carId})">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="carManager.deleteCar(${car.carId})">
                        <i class="fas fa-trash"></i>
                    </button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    handleSearch(e) {
        const searchTerm = e.target.value.toLowerCase();
        const rows = document.querySelectorAll('#carsTable tr');
        
        rows.forEach(row => {
            const text = row.textContent.toLowerCase();
            row.style.display = text.includes(searchTerm) ? '' : 'none';
        });
    }

    async deleteCar(carId) {
        if (confirm('Are you sure you want to delete this car?')) {
            try {
                const response = await fetch(this.apiEndpoints.delete(carId), {
                    method: 'DELETE'
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                this.showNotification('Car deleted successfully!', 'success');
                this.loadCars();
            } catch (error) {
                console.error('Error deleting car:', error);
                this.showNotification('Failed to delete car.', 'error');
            }
        }
    }

    async editCar(carId) {
        // This would open an edit modal or navigate to edit page
        // Implementation depends on your UI design preference
        console.log('Edit car:', carId);
    }

    showNotification(message, type) {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
            ${message}
            <button class="close-notification" onclick="this.parentElement.remove()">
                <i class="fas fa-times"></i>
            </button>
        `;

        document.body.appendChild(notification);

        // Auto remove after 5 seconds
        setTimeout(() => {
            if (notification.parentElement) {
                notification.remove();
            }
        }, 5000);
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.carManager = new CarManager();
});

// Parts Management Functions
function renderPartsTable() {
  const tbody = document.getElementById('partsTable');
  tbody.innerHTML = '';
  
  parts.forEach(part => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${part.name}</td>
      <td>${part.partNumber}</td>
      <td>${part.category.charAt(0).toUpperCase() + part.category.slice(1)}</td>
      <td>$${part.price.toFixed(2)}</td>
      <td>
        <span class="badge ${part.stock <= 5 ? 'unavailable' : part.stock <= 10 ? 'warning' : 'available'}">
          ${part.stock}
        </span>
      </td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editPart(${part.id})">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-danger" onclick="deletePart(${part.id})">
          <i class="fas fa-trash"></i>
        </button>
      </td>
    `;
    tbody.appendChild(row);
  });
}

function addPart(partData) {
  const newPart = {
    id: generateId(),
    ...partData,
    price: parseFloat(partData.price),
    stock: parseInt(partData.stock)
  };
  
  parts.push(newPart);
  renderPartsTable();
  updateDashboardStats();
  showNotification('Part added successfully!');
}

function deletePart(id) {
  if (confirm('Are you sure you want to delete this part?')) {
    parts = parts.filter(part => part.id !== id);
    renderPartsTable();
    updateDashboardStats();
    showNotification('Part deleted successfully!');
  }
}

function editPart(id) {
  const part = parts.find(p => p.id === id);
  if (part) {
    const form = document.getElementById('partForm');
    form.name.value = part.name;
    form.partNumber.value = part.partNumber;
    form.category.value = part.category;
    form.price.value = part.price;
    form.stock.value = part.stock;
    form.compatibility.value = part.compatibility;
    form.description.value = part.description;
    
    form.dataset.editId = id;
    form.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save"></i> Update Part';
  }
}

// Order Management Functions
function renderOrdersTable() {
  const tbody = document.getElementById('ordersTable');
  tbody.innerHTML = '';
  
  orders.forEach(order => {
    const row = document.createElement('tr');
    let statusClass = '';
    let actionButtons = '';
    
    switch (order.status) {
      case 'pending':
        statusClass = 'warning';
        actionButtons = `
          <button class="btn btn-sm btn-success" onclick="updateOrderStatus('${order.id}', 'completed')">Approve</button>
          <button class="btn btn-sm btn-danger" onclick="updateOrderStatus('${order.id}', 'cancelled')">Cancel</button>
        `;
        break;
      case 'processing':
        statusClass = 'info';
        actionButtons = `
          <button class="btn btn-sm btn-success" onclick="updateOrderStatus('${order.id}', 'completed')">Complete</button>
          <button class="btn btn-sm btn-danger" onclick="updateOrderStatus('${order.id}', 'cancelled')">Cancel</button>
        `;
        break;
      case 'completed':
        statusClass = 'available';
        actionButtons = '<button class="btn btn-sm btn-primary">View</button>';
        break;
      case 'cancelled':
        statusClass = 'unavailable';
        actionButtons = '<button class="btn btn-sm btn-primary">View</button>';
        break;
      default:
        statusClass = 'available';
        actionButtons = '<button class="btn btn-sm btn-primary">View</button>';
    }
    
    row.innerHTML = `
      <td>#${order.id}</td>
      <td>${order.customer}</td>
      <td>${order.item}</td>
      <td>$${order.amount.toLocaleString()}</td>
      <td><span class="badge ${statusClass}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></td>
      <td>${order.date}</td>
      <td>${actionButtons}</td>
    `;
    tbody.appendChild(row);
  });
}

function updateOrderStatus(orderId, newStatus) {
  const order = orders.find(o => o.id === orderId);
  if (order) {
    order.status = newStatus;
    renderOrdersTable();
    updateDashboardStats();
    showNotification(`Order ${orderId} ${newStatus} successfully!`);
  }
}

// Search Functions
function searchCars(query) {
  const filteredCars = cars.filter(car => 
    car.brand.toLowerCase().includes(query.toLowerCase()) ||
    car.model.toLowerCase().includes(query.toLowerCase()) ||
    car.year.toString().includes(query)
  );
  
  const tbody = document.getElementById('carsTable');
  tbody.innerHTML = '';
  
  filteredCars.forEach(car => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>
        <div style="width: 50px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
          <i class="fas fa-car" style="color: #9ca3af;"></i>
        </div>
      </td>
      <td>${car.brand}</td>
      <td>${car.model}</td>
      <td>${car.year}</td>
      <td>$${car.price.toLocaleString()}</td>
      <td>
        <span class="badge ${car.availability === 'available' ? 'available' : 'unavailable'}">
          ${car.availability.charAt(0).toUpperCase() + car.availability.slice(1)}
        </span>
      </td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editCar(${car.id})">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-danger" onclick="deleteCar(${car.id})">
          <i class="fas fa-trash"></i>
        </button>
      </td>
    `;
    tbody.appendChild(row);
  });
}

function searchParts(query) {
  const filteredParts = parts.filter(part => 
    part.name.toLowerCase().includes(query.toLowerCase()) ||
    part.partNumber.toLowerCase().includes(query.toLowerCase())
  );
  
  const tbody = document.getElementById('partsTable');
  tbody.innerHTML = '';
  
  filteredParts.forEach(part => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${part.name}</td>
      <td>${part.partNumber}</td>
      <td>${part.category.charAt(0).toUpperCase() + part.category.slice(1)}</td>
      <td>$${part.price.toFixed(2)}</td>
      <td>
        <span class="badge ${part.stock <= 5 ? 'unavailable' : part.stock <= 10 ? 'warning' : 'available'}">
          ${part.stock}
        </span>
      </td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editPart(${part.id})">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-danger" onclick="deletePart(${part.id})">
          <i class="fas fa-trash"></i>
        </button>
      </td>
    `;
    tbody.appendChild(row);
  });
}

// File Upload Handler
function handleFileUpload() {
  const fileInput = document.getElementById('carImages');
  const previewContainer = document.getElementById('imagePreview');
  
  fileInput.addEventListener('change', function(e) {
    previewContainer.innerHTML = '';
    
    for (let file of e.target.files) {
      if (file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const div = document.createElement('div');
          div.className = 'image-preview-item';
          div.style.cssText = `
            position: relative;
            display: inline-block;
            margin: 5px;
            border-radius: 8px;
            overflow: hidden;
          `;
          
          div.innerHTML = `
            <img src="${e.target.result}" style="width: 100px; height: 80px; object-fit: cover;">
            <button type="button" onclick="this.parentElement.remove()" style="
              position: absolute;
              top: 5px;
              right: 5px;
              background: rgba(239, 68, 68, 0.8);
              color: white;
              border: none;
              border-radius: 50%;
              width: 20px;
              height: 20px;
              font-size: 12px;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
            ">&times;</button>
          `;
          
          previewContainer.appendChild(div);
        };
        reader.readAsDataURL(file);
      }
    }
  });
}

// Initialize Dashboard
document.addEventListener('DOMContentLoaded', function() {
  // Navigation event listeners
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', function() {
      const section = this.getAttribute('data-section');
      showSection(section);
    });
  });
  
  // Car form submission
  document.getElementById('carForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const carData = Object.fromEntries(formData.entries());
    
    if (this.dataset.editId) {
      // Update existing car
      const carId = parseInt(this.dataset.editId);
      const carIndex = cars.findIndex(c => c.id === carId);
      if (carIndex !== -1) {
        cars[carIndex] = {
          ...cars[carIndex],
          ...carData,
          price: parseFloat(carData.price),
          year: parseInt(carData.year)
        };
        showNotification('Car updated successfully!');
      }
      delete this.dataset.editId;
      this.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-plus"></i> Add Car';
    } else {
      // Add new car
      //addCar(carData);
    }
    
    this.reset();
    //renderCarsTable();
    updateDashboardStats();
  });
  
  // Part form submission
  document.getElementById('partForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const partData = Object.fromEntries(formData.entries());
    
    if (this.dataset.editId) {
      // Update existing part
      const partId = parseInt(this.dataset.editId);
      const partIndex = parts.findIndex(p => p.id === partId);
      if (partIndex !== -1) {
        parts[partIndex] = {
          ...parts[partIndex],
          ...partData,
          price: parseFloat(partData.price),
          stock: parseInt(partData.stock)
        };
        showNotification('Part updated successfully!');
      }
      delete this.dataset.editId;
      this.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-plus"></i> Add Part';
    } else {
      // Add new part
      addPart(partData);
    }
    
    this.reset();
    renderPartsTable();
    updateDashboardStats();
  });
  
  // Contact form submission
  document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    showNotification('Message sent successfully! We will get back to you soon.');
    this.reset();
  });
  
  // Search functionality
  document.getElementById('carSearch').addEventListener('input', function(e) {
    if (e.target.value.trim() === '') {
      //renderCarsTable();
    } else {
      searchCars(e.target.value);
    }
  });
  
  document.getElementById('partSearch').addEventListener('input', function(e) {
    if (e.target.value.trim() === '') {
      renderPartsTable();
    } else {
      searchParts(e.target.value);
    }
  });
  
  // File upload handler
  handleFileUpload();
  
  // Logout functionality (keeping your original code)
  document.getElementById('logout').addEventListener('click', async () => {
    if (confirm('Are you sure you want to logout?')) {
      try {
        await fetch('/auth/logout', { method: 'POST' });
        window.location.href = '/login.html';
      } catch (error) {
        console.error('Logout failed:', error);
        // Fallback for demo
        showNotification('Logout successful! Redirecting to login page...', 'success');
        setTimeout(() => {
          window.location.href = '/login.html';
        }, 2000);
      }
    }
  });
  
  // Initial render
  //renderCarsTable();
  renderPartsTable();
  renderOrdersTable();
  updateDashboardStats();
  
  // Show dashboard by default
  showSection('dashboard');
});

// Add CSS animations for notifications
const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }
`;
document.head.appendChild(style);
</script>